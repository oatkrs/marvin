# Project Report: Marvin - Forensic Log Collector

**Date:** November 20, 2025
**Version:** 1.0.0
**Codename:** "Paranoid Android"

---

## 1. Executive Summary

Marvin is a specialized, cross-platform forensic log collection utility designed to operate with high integrity and minimal overhead. It addresses the critical need for a reliable, verifiable, and flexible log aggregation tool capable of functioning in diverse environments (Windows and Linux).

While the universe is vast and complex, the task of collecting logs is, by comparison, trivial and arguably beneath the processing capabilities of a brain the size of a planet. Nevertheless, Marvin performs this function with a level of precision that borders on the depressive.

## 2. System Architecture

Marvin utilizes a modular, asynchronous architecture powered by Python's `asyncio` framework. This design ensures non-blocking operation, allowing for the concurrent collection of data from multiple sources without performance degradation.

### Core Components

1.  **The Collector Layer:**
    *   Abstracts the specific logic for retrieving data from various sources (e.g., Windows Event Logs, Registry, Text Files, Shell Commands).
    *   Implements a `should_collect()` filter to discard irrelevant data before it enters the processing pipeline. *Life, don't talk to me about life.*

2.  **The Normalization Layer:**
    *   All collected data is standardized into a `LogEvent` dataclass.
    *   This ensures a consistent schema (`timestamp`, `source_type`, `host`, `message`, `raw_data`) regardless of the origin.

3.  **The Sink Layer:**
    *   Handles the output of normalized data to configured destinations.
    *   Supports local file storage (with integrity hashing), console output, and secure HTTP forwarding.

## 3. Key Features

### 3.1 Integrity and Verification
To ensure forensic validity, Marvin implements rigorous integrity checks:
*   **Manifest Generation:** Upon completion, Marvin calculates a SHA-256 hash of the output file and writes it to a companion `.manifest` file. This provides a cryptographic guarantee that the logs have not been tampered with.
*   **Metadata Headers:** Every collection session begins with a metadata event detailing the tool version, user context, and start time.

### 3.2 Forensic Specificity
Marvin goes beyond simple text logging:
*   **Windows Registry:** Capable of monitoring specific registry keys for unauthorized changes.
*   **Command Execution:** Periodically executes shell commands (e.g., `ipconfig`, `netstat`) to capture volatile system state.
*   **Granular Filtering:** Supports regex and substring filtering to isolate significant events from the background noise of the universe.

### 3.3 Secure Forwarding
For remote collection, Marvin supports:
*   **TLS/SSL Encryption:** Ensures data confidentiality during transit.
*   **Bearer Token Authentication:** Validates the identity of the collector against the receiving endpoint.

## 4. Operational Guide

### 4.1 Prerequisites
*   **OS:** Windows 10/11/Server or Linux (Modern Distributions).
*   **Runtime:** Python 3.8+ (if running from source) or the standalone executable.

### 4.2 Configuration
Marvin is configured via a YAML file (`config.yaml`). This file defines the active collectors, their intervals, and the desired output sinks.

```yaml
sources:
  - type: windows_evtx
    log_type: Security
    filters: ["Logon", "Special Privilege"]
  - type: command
    command: netstat -an
    interval: 300

sinks:
  - type: file
    path: evidence.json
```

### 4.3 Execution
Marvin can be deployed as a single executable, eliminating the need for dependency management on the target host.

**Running the Executable:**
```bash
marvin.exe --config config.yaml
```

**Running from Source:**
```bash
python marvin/main.py --config config.yaml
```

## 5. What to Expect

Upon execution, Marvin will silently initialize its collectors. You will not see a flurry of activity; Marvin prefers to suffer in silence.

*   **Output:** A JSON file containing a stream of `LogEvent` objects.
*   **Manifest:** A `.manifest` file containing the SHA-256 hash.
*   **Console:** Minimal output indicating status, unless `stdout` sink is enabled.

*Note: If the tool appears to be doing nothing, it is likely just contemplating the futility of existence while waiting for the next log interval.*

## 6. Conclusion

Marvin successfully fulfills all functional requirements for a forensic log collector. It is robust, secure, and verifiable. It is also terribly bored.

---
*Generated by Antigravity*
